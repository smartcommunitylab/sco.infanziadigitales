<ion-view id="dettaglidiario" title="{{'diary_details' | translate}}">
     <ion-nav-bar class="bar bar-ungiorno">
        <ion-nav-back-button>
        </ion-nav-back-button>
          <ion-nav-buttons side="right">
                <button class="button" ng-click="modify()" ng-if="isViewMode()">
                    <i class="icon ion-android-create"></i>
                </button>
                <button class="button" ng-click="save()" ng-if="!isViewMode()">
                    <i class="icon ion-checkmark-round"></i>
                </button>
                </button>
            </ion-nav-buttons>
    </ion-nav-bar>
    <ion-content>
        <div class="headerdata">{{getString('data', baby.gender)}} {{isMale(baby.gender) ? 'name_m' : 'name_f' | translate}}</div>
        <div class="topdata">{{getString('name', baby.gender)}} {{isMale(baby.gender) ? 'name_m' : 'name_f' | translate}}</div>
        <div class="item item-input-inset input-children" ng-if="isViewMode()">
        <label class="item item-input children-edit">
            <span class="textdata">{{baby.firstName}}</span>
        </label>
            </div>
        <div class="item item-input-inset input-children" ng-if="!isViewMode()">
        <label class="item item-input children-edit">
            <input type="text"  value="{{baby.firstName}}">
        </label>
        <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
        </div>
        <div class="topdata">{{getString('surname', baby.gender)}} {{isMale(baby.gender) ? 'name_m' : 'name_f' | translate}}</div>
        <div class="item item-input-inset input-children" ng-if="isViewMode()">
        <label class="item item-input children-edit">
            <span class="textdata">{{baby.lastName}}</span>
        </label>
            </div>
        <div class="item item-input-inset input-children" ng-if="!isViewMode()">
        <label class="item item-input children-edit">
            <input type="text"  value="{{baby.lastName}}">
        </label>
        <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
        </div>
        <div class="topdata">{{getString('date_birth', baby.gender)}} {{isMale(baby.gender) ? 'name_m' : 'name_f' | translate}}</div>
        <div class="item item-input-inset input-children" ng-if="isViewMode()">
        <label class="item item-input children-edit">
            <span class="textdata">{{baby.birthday*1000 | date:"d MMMM yyyy"}}</span>
        </label>
            </div>
        <div class="item item-input-inset input-children" ng-if="!isViewMode()">
        <label class="item item-input children-edit">
            <input type="date"  value="{{baby.birthday*1000 | date:'yyyy-MM-dd'}}">
        </label>
        <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
        </div>
        <img ng-src="{{baby.image}}" class="sizeImage">
        <div class="headerdata">{{'data_family' | translate}}</div>
        <div ng-repeat="data in baby.persons track by $index" ng-if="isFamily(data.relation)">
            <div class="topdata">{{'name' | translate}} {{getPreposition(data.gender, data.relation)}} {{data.relation}}</div>
            <div class="item item-input-inset input-children" ng-if="isViewMode()">
            <label class="item item-input children-edit">
                <span class="textdata">{{data.fullName}}</span>
            </label>
            </div>
            <div class="item item-input-inset input-children" ng-if="!isViewMode()">
            <label class="item item-input children-edit">
                <input type="text"  value="{{data.fullName}}">
            </label>
            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
            </div>
            <div class="topdata">{{'surname' | translate}} {{getPreposition(data.gender, data.relation)}} {{data.relation}}</div>
            <div class="item item-input-inset input-children" ng-if="isViewMode()">
            <label class="item item-input children-edit">
                <span class="textdata">{{data.lastName}}</span>
            </label>
            </div>
            <div class="item item-input-inset input-children" ng-if="!isViewMode()">
            <label class="item item-input children-edit">
                <input type="text"  value="{{data.lastName}}">
            </label>
            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
            </div>
            <div class="topdata">{{'date_birth' | translate}} {{getPreposition(data.gender, data.relation)}} {{data.relation}}</div>
            <div class="item item-input-inset input-children" ng-if="isViewMode()">
            <label class="item item-input children-edit">
                <span class="textdata">{{data.birthday*1000 | date:"d MMMM yyyy"}}</span>
            </label>
            </div>
            <div class="item item-input-inset input-children" ng-if="!isViewMode()">
            <label class="item item-input children-edit">
                <input type="date"  value="{{data.birthday*1000 | date:'yyyy-MM-dd'}}">
            </label>
            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
            </div>
            <div class="separator"></div>
        </div>
        <div>
            <div ng-repeat="data in addedComponents track by $index" ng-if="!isViewMode()">
                <button id="selezion-button" class="button alignRightIcon" ng-click="deleteComponent($index)">
                    <i class="icon ion-trash-b"></i>
                </button>
                <div class="topdata">{{'name' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="text" ng-model="data.firstName">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <div class="topdata">{{'surname' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="text" ng-model="data.lastName">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <div class="topdata">{{'date_birth' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="date" ng-model="data.birthday">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <label class="item item-input item-select selectrole">
                    <div class="input-label">{{ 'role' | translate}}</div>
                    <select ng-model="data.relation">
                        <option>{{ 'mom' | translate}}</option>
                        <option>{{ 'dad' | translate}}</option>
                        <option>{{ 'brother' | translate}}</option>
                        <option>{{ 'sister' | translate}}</option>
                    </select>
                </label>
                <div class="separator"></div>
            </div>
            <button class="button addComponent" ng-click="addComponent()" ng-if="!isViewMode()">
                <div class="textdata" >{{'new_component' | translate}}</div>
            </button>
        </div>
        <div class="headerdata">{{'acces_diary' | translate}}</div>
        <div ng-repeat="data in baby.persons track by $index" ng-if="data.authorized">
            <div class="topdata">{{getString('name', data.gender, data.relation)}} {{data.relation}}</div>
            <div class="item item-input-inset input-children" ng-if="isViewMode()">
            <label class="item item-input children-edit">
                <span class="textdata">{{data.firstName}}</span>
            </label>
            </div>
            <div class="item item-input-inset input-children" ng-if="!isViewMode()">
            <label class="item item-input children-edit">
                <input type="text"  value="{{data.firstName}}">
            </label>
            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
            </div>
            <div ng-if="data.phone" class="textdata">
                <i class="sizeIcon icon ion-android-call"></i>
                <div class="person-details">
                    <div class="topdata">{{getString('number_parents', data.gender, data.relation)}} {{data.relation}}</div>
                    <a href="tel:{{phone}}"  ng-repeat="phone in data.phone track by $index">
                        <div class="item item-input-inset input-children" ng-if="isViewMode()">
                            <label class="item item-input children-edit">
                                <span class="textdata">{{phone}}</span>
                            </label>
                        </div>
                        <div class="item item-input-inset input-children" ng-if="!isViewMode()">
                            <label class="item item-input children-edit">
                                <input type="text"  value="{{phone}}">
                            </label>
                            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
                        </div>
                    </a>
                </div>
            </div>
            <div ng-if="data.email" class="textdata">
                <i class="sizeIcon icon ion-email"></i>
                <div class="person-details">
                    <div class="topdata">{{getString('mail_parents', data.gender, data.relation)}} {{data.relation}}</div>
                    <a href="mailto:{{mail}}" ng-repeat="mail in data.email track by $index">
                        <div class="item item-input-inset input-children" ng-if="isViewMode()">
                            <label class="item item-input children-edit">
                                <span class="textdata">{{mail}}</span>
                            </label>
                        </div>
                        <div class="item item-input-inset input-children" ng-if="!isViewMode()">
                            <label class="item item-input children-edit">
                                <input type="text"  value="{{mail}}">
                            </label>
                            <i class="ion-asterisk alignRight inline vertical-middle" ng-if="!isViewMode()"></i>
                        </div>
                    </a>
                </div>
                <div class="separator"></div>
            </div>
        </div>
         <div>
            <div ng-repeat="data in addedPeople track by $index" ng-if="!isViewMode()">
                <button id="bottom-button" class="button alignRightIcon" ng-click="deletePeople($index)">
                    <i class="icon ion-trash-b"></i>
                </button>
                <div class="topdata">{{'fullName' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="text"  ng-model="data.fullName">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <div class="topdata">{{'number_parents' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="text"  ng-model="data.phone">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <div class="topdata">{{'email' | translate}}</div>
                <div class="item item-input-inset input-children">
                    <label class="item item-input children-edit">
                        <input type="text"  ng-model="data.email">
                    </label>
                    <i class="ion-asterisk alignRight inline vertical-middle"></i>
                </div>
                <label class="item item-input item-select selectrole">
                    <div class="input-label">{{ 'role' | translate}}</div>
                    <select  ng-model="data.role">
                        <option>{{'parents' | translate}}</option>
                        <option>{{'teacher' | translate}}</option>
                    </select>
                </label>
                <div class="separator"></div>
            </div>
            <button id="selezion-button" class="button addComponent" ng-click="addPeople()" ng-if="!isViewMode()">
                <div class="textdata" >{{'new_people' | translate}}</div>
            </button>
        </div>
        <div class="headerdata">{{'notes' | translate}}</div>
            <div class="item item-input-inset input-children" ng-if="isViewMode()">
            <label class="item item-input children-edit">
                <span class="textdata">{{isEmptyNote(baby.personalNotes) ? 'nothing_note' : baby.personalNotes  | translate}}</span>
            </label>
            </div>
            <div class="item item-input-inset input-children" ng-if="!isViewMode()">
            <label class="item item-input children-edit">
                <input type="text"  value="{{isEmptyNote(baby.personalNotes) ? 'insert_note' : baby.personalNotes  | translate}}">
            </label>
            </div>
        <div class="asterisk">{{'asterisk' | translate}}</div>
    </ion-content>
</ion-view>
