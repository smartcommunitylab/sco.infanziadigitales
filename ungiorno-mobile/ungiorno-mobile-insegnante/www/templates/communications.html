<ion-view id="communications" title="{{'parent_communications' | translate}}">
    <ion-nav-bar class="bar bar-ungiorno">
        <ion-nav-back-button>
        </ion-nav-back-button>
            <ion-nav-buttons side="right">
                <button class="button" ng-click="addCom()" ng-if="!isCommunicationSelectedMode() && !newCommunicationMode()">
                    <i class="icon ion-plus-round"></i>
                </button>

                <button class="button" ng-click="modifyCom()" ng-if="isCommunicationSelectedMode()">
                    <i class="icon ion-android-create"></i>
                </button>

                <button class="button" ng-click="deleteCommunication()" ng-if="isCommunicationSelectedMode()">
                    <i class="icon ion-trash-b"></i>
                </button>
                 <button class="button" ng-click="editCom()" ng-if="editState()">
                    <i class="icon ion-checkmark-round"></i>
                </button>
                <button class="button" ng-click="deleteCom()" ng-if="checkNewCommunication()">
                    <i class="icon ion-close-round"></i>
                </button>
                <button class="button" ng-click="sendCom()" ng-if="checkNewCommunication()">
                    <i class="icon ion-checkmark-round"></i>
                </button>
            </ion-nav-buttons>
    </ion-nav-bar>

    <ion-content has-header="true">
        <div class="communication card" ng-if="checkNewCommunication() " >
            <a class="communication-text" > {{ 'communication_type' | translate}} </a>

            <ion-list class="padlist" >
                <ion-checkbox  ng-repeat="communicationType in communicationTypes" ng-model="communicationType.checked" ng-checked="communicationType.checked" ng-change="selectType(communicationType)">
                      {{communicationType.typeId}}
                </ion-checkbox>

            </ion-list>
            <div ng-if="communicationTypes[1].checked">
               <a style="display: inline-block;" class=" input-label communication-text" >{{ 'deadline_time' | translate}} : </a>

               <label style="display: inline-block">
                   <input type="text" id="deadlineDate" placeholder="28/08/2015">
                </label>

               <ion-checkbox style="display: inline-block" ng-model="deliveryCheck.checked" ng-checked="deliveryCheck.checked" >
                    Controlla consegna
               </ion-checkbox>

            </div>
                <label >
                   <input type="text" id="description" placeholder="Descrizione">
                </label>
        </div>
        <div class="communication card" ng-repeat="communication in communications track by $index" class="new-communication" ng-show="modifyDescription($index) && !editState()" >
               <label >
                   <span style="display: inline-block" class="input-label communication-text"><br>Descrizione</span>
                   <input type="text" id="modifyDescription" value="{{communication.description}}">
               </label>
                <label >
                    <span style="display: inline-block" class="input-label communication-text">Data di scadenza</span>
                   <input type="date" id="modifyDateToCheck" value="{{communication.dateToCheck | date}}">
               </label>
            </div>
        <div class="communication card" ng-repeat="communication in communications track by $index" ng-click="selectCommunication($index)" ng-class="{'communication-selected': isCommunicationSelected($index)}"  ng-if="communication.doCheck && !modifyDescription($index) ">
            <div >
                <a class="communication-text">{{communication.description}}</a>
                <a class="communication-date">{{'communication_of' | translate}} {{communication.creationDate * 1000 | date}}</a>
                <p ng-if="controlDateToCheck($index)">{{'deadline' | translate}} {{communication.dateToCheck * 1000 | date}}</p>
                <button ng-if="buttonShow(communication.deadline)" ng-click="selectCommunication($index)">
                     Controlla Consegne
                </button>
            </div>
        </div>

    </ion-content>
</ion-view>
