<ion-view id="home" ng-init="initialize()" title="{{teacherName}} - {{title}}">
    <ion-nav-buttons side="right">
        <button class="button" ng-if="!viewClose()" ng-click="refreshHome()">
            <i class="icon ion-loop action-icon"></i>
        </button>
        <!--
        <button class="button" ng-if="!viewClose()" ng-click="openNotes()">
            <i class="icon ion-document-text action-icon "></i>
        </button>
        <button class="button" ng-if="!viewClose()" ng-click="openCommunications()">
            <i class="icon ion-android-alarm-clock action-icon"></i>
        </button>
        <button class="button" ng-if="viewClose()" ng-click="closeNotesAndComm()">{{'close' | translate | uppercase}}</button>
        <button class="button" ng-if="viewClose() && communicationExpanded " ng-click="saveNotesAndComm()">{{'save' | translate | uppercase}}</button>
-->

    </ion-nav-buttons>
    <!--
    <ion-nav-title ng-init="getDateString()">
        <div>{{date | date:'EEEE, d MMMM yyyy'}} - Maestra Chiara</div>
    </ion-nav-title>
-->
    <ion-content has-header="true">
        <div class="row section-row home-container">
            <div class="col section-row" ng-class="{'sections-displayer-short': noteExpanded || communicationExpanded, 'sections-displayer-full': !(noteExpanded || communicationExpanded)}">
                <div class="row section-row">
                    <div class="tabs-striped tabs-top tabs-background-dark tabs-color-light">
                        <div class="tabs section-tabs">
                            <a class="tab-item section-tab" ng-repeat="section in sections track by $index" class="col" ng-click="changeSection($index)" ng-class="{'active' :  (isThisSection($index))}"> {{section.sectionName}} </a>
                            <a class="tab-item section-tab" class="col" ng-click="changeSection('all')" ng-class="{'active' :  (isThisSection('all'))}">  {{'all_section' | translate}} </a>
                        </div>
                    </div>
                </div>
                <div class="row home-section-space">
                    <div class="col">
                        <div class="sectionPeriod" ng-click="changeSectionPeriod('anticipo')">
                            <svg ng-class="{'sectionBabyIndicator-now':isNow('anticipo'),'sectionBabyIndicator-notnow':!isNow('anticipo')}" id="svg" viewbox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="{{colors['anticipo']}}" />
                                <path fill="none" stroke-linecap="round" stroke-width="5" stroke="#bd3e4d" stroke-dasharray="{{getLineStroke(availableChildren['anticipo'],totalChildrenNumber['anticipo'])}}" d="M50 10
           a 40 40 0 0 1 0 80
           a 40 40 0 0 1 0 -80" />
                                <text x="50" y="50" text-anchor="middle" dy="7" font-size="20">{{availableChildren['anticipo']}} su {{totalChildrenNumber['anticipo']}}</text>
                            </svg>
                        </div>
                        <div class="section-text">
                            {{'home_anticipo' | translate}}
                        </div>
                    </div>
                    <div class="col">
                        <div class="sectionPeriod" ng-click="changeSectionPeriod('mensa')">

                            <svg ng-class="{'sectionBabyIndicator-now':isNow('mensa'),'sectionBabyIndicator-notnow':!isNow('mensa')}" id="svg" viewbox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="{{colors['mensa']}}" />
                                <path fill="none" stroke-linecap="round" stroke-width="5" stroke="#bd3e4d" stroke-dasharray="{{getLineStroke(availableChildren['mensa'],totalChildrenNumber['mensa'])}}" d="M50 10
           a 40 40 0 0 1 0 80
           a 40 40 0 0 1 0 -80" />
                                <text x="50" y="50" text-anchor="middle" dy="7" font-size="20">{{availableChildren['mensa']}} su {{totalChildrenNumber['mensa']}}</text>
                            </svg>
                        </div>
                        <div class="section-text">
                            {{'home_orario_normale' | translate}}
                        </div>
                    </div>
                    <div class="col">
                        <div ng-class="{'sectionBabyIndicator-now':isNow('posticipo'),'sectionBabyIndicator-notnow':!isNow('posticipo')}" ng-click="changeSectionPeriod('posticipo')">
                            <svg class="sectionBabyIndicator" id="svg" viewbox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="{{colors['posticipo']}}" />
                                <path fill="none" stroke-linecap="round" stroke-width="5" stroke="#bd3e4d" stroke-dasharray="{{getLineStroke(availableChildren['posticipo'],totalChildrenNumber['posticipo'])}}" d="M50 10
           a 40 40 0 0 1 0 80
           a 40 40 0 0 1 0 -80" />
                                <text x="50" y="50" text-anchor="middle" dy="7" font-size="20">{{availableChildren['posticipo']}} su {{totalChildrenNumber['posticipo']}}</text>
                            </svg>
                        </div>
                        <div class="section-text">
                            {{'home_posticipo' | translate}}
                        </div>
                        <!--                <div section></div>-->
                    </div>
                </div>
                <div class="home-separator"></div>
                <div class="section-text" ng-if="communicationExpanded">
                    {{'home_scadenze' | translate}}
                </div>
                <div class=" children-home " ng-repeat="child in childrenProfiles[selectedPeriod] track by $index " ng-click="detailOrCommunication(child) ">
                    <div class="badge-msg " ng-if="child.calNotes && !communicationExpanded "><i class="icon center icon-message ion-document-text "></i>
                    </div>
                    <img ng-src="{{getChildImage(child)}} " ng-class="{ 'img-assente':child.exitTime==null || (child.exitTime < getTime(selectedPeriod)), 'img-presente':child.exitTime !=null, 'img-not-active':!child.active, 'img-communication':communicationExpanded, 'delivered':(!getChildrenDeliveryByID(child.kidId) && communicationExpanded) } ">

                    <!--            <img ng-src="{{child.image}} ">-->
                    <div class="name-of-child " ng-if="!child.image || child.image=='' ">{{child.childrenName}}</div>

                    <div class="children-presenza " ng-if="child.active && !communicationExpanded " ng-class="{ 'child-assente':child.exitTime==null, 'child-presente':child.exitTime !=null} ">{{child.presenza}}</div>
                    <!--                    <span class="comunication-done " ng-if="getChildrenDeliveryByID(child.kidId) "></span>-->
                    <!--
<div class="badge-delivery " ng-if="getChildrenDeliveryByID(child.kidId) && communicationExpanded "><i class="icon center con-message ion-checkmark-round "></i>
</div>
-->
                </div>
            </div>
            <!--
            <div class="col col-25 home-section-space right-side-fake-menu side-fake-menu-shadow " ng-hide="!noteExpanded ">
    <div class="scadenze " ng-if="!newNoteExpandend "> <i class="icon ion-document-text "></i>{{'class_diary' | translate}}</div>

    <div class="row ">
        <div ng-hide="!teachersNote " class="teacher-notes " ng-class="{ 'changing-notes-teachers-to-parents': (parentsNote && !teachersNote)} ">
            <button class="button create-note " ng-click="createNotes() ">{{'new_note' | translate}}</button>

            <ion-list>
                <ion-item class="item-text-complete " ng-repeat="note in teacherNotes track by $index ">
                    <div class="babyNames " ng-if="isBabyAssignedToNote(note) ">
                        <img class="notes-baby-image " ng-if="note.kids.length===1 " ng-src="{{getChildImage(note.kids[0])}} "></img>
                        <div class="notes-baby-name inline " ng-repeat="baby in note.kids track by $index " ng-click="openDetailById(note.kidIds[$index]) ">{{baby.name}}</div>
                    </div>
                    {{note.note}}
                </ion-item>
            </ion-list>
            <div class="padding-no-notes ">
                <div class="nothing-to-show-placeholder " ng-if="teacherNotes.length===0 ">
                    {{'no_notes_today' | translate}}
                </div>
            </div>

        </div>

        <div ng-hide="!newNoteExpandend" class="new-note-panel">
            <div class="list">
                <div class="new-note-title">{{'create_new_note' | translate | uppercase}}</div>
                <label class="item item-input new-note-description">
                    <input type="text" placeholder="Inserisci Testo" ng-model="newNote.description">
                </label>
                <div class="item item-checkbox new-note-assign-container">
                    <label class="checkbox">
                        <input type="checkbox" ng-model="newNote.assignedBaby">
                    </label>
                    {{'associate_to_childs' | translate}}
                </div>
                <label class="item item-input">
                    <input type="text" ng-if="newNote.assignedBaby" placeholder="{{'baby_name' | translate}}" ng-change="search()" ng-focus="focused(true, true)" ng-blur="focused(true, false)" ng-model="newNote.search">
                </label>
                <ion-list class="list children-search" ng-if="displayHint()" ng-focus="focused(false, true)" ng-blur="focused(false, false)">
                    <ion-item class="item-text-complete" ng-repeat="children in newNote.possibleChildrens" class="child-search" ng-click="selectChildrenForNote(children)">
                        <img class="inline new-note-kid-image" ng-src="{{getChildImage(children)}}"></img>
                        <div class="inline new-note-kid-name">{{children.childrenName}}</div>
                    </ion-item>
                </ion-list>
                <div class="assigned_babies" ng-if="newNote.assignedBaby">
                    {{'associated_kids' | translate}}
                </div>
                <ion-list ng-if="newNote.assignedBaby">


                    <ion-item class="item-text-complete row" class="associated-kid-container" ng-repeat="children in newNote.associatedKids">
                        <div class="col col-25"> <img class="inline associated-kid-image" ng-src="{{getChildImage(children)}}"></img>

                        </div>
                        <div class="col col-75 ">
                            <button class="button button-icon  associated-kid-delete-btn  row-voce text-right" ng-click="deleteChildrenFromNewNote(children)">
                                <i class="icon ion-android-close"></i>
                            </button>
                            <div class="inline associated-kid-name row row-voce">{{children.childrenName}}</div>
                        </div>


                    </ion-item>
                </ion-list>
                <div class="new-note-actions row">
                    <button class="button cancel-button col" ng-click="cancelNewNote()">{{'cancel' | translate}}</button>
                    <button class="button create-button col" ng-click="sendNewNote()">{{'create_note' | translate}}</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col col-25 home-section-space right-side-fake-menu side-fake-menu-shadow " ng-hide="!communicationExpanded ">
    <ion-content class="under-bar ">
        <div class="scadenze "> <i class="icon ion-android-alarm-clock "></i>{{'scadenze' | translate|uppercase}}</div>
        <div class="list list-inset " ng-if="communications.length> 0">
            <ion-radio class="radio-home" ng-repeat="item in communications |orderBy:'-creationDate'" ng-if="item.doCheck != null" ng-value="item.communicationId" ng-model="data.communication" ng-click="changeCommunication(item.communicationId)">
                <div class="communication-home item-text-wrap">{{ item.description }}</div>
            </ion-radio>
        </div>
        <div class="nothing-to-show-placeholder-wrapper">
            <div class="nothing-to-show-placeholder" ng-if="communications.length === 0">
                {{'no_communications_home' | translate}}
            </div>
        </div>
    </ion-content>

</div>
-->

    </ion-content>
</ion-view>
